<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Catálogo Pro Responsivo</title>
    <script src="https://unpkg.com/page-flip/dist/js/page-flip.browser.js"></script>

    <style>
/* Ajustes Mobile */
@media (max-width: 768px) {
    #book-wrapper {
        height: 90vh; /* Aumenta o espaço para o catálogo */
        width: 100vw;
    }

    #book {
        /* Remove sombras pesadas que podem "comer" pixels na tela pequena */
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

    .nav-btn {
        top: auto;
        bottom: 20px; /* Botões flutuando na parte de baixo */
        padding: 12px 25px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50px; /* Botão mais arredondado para mobile */
    }
    
    #prev-btn { left: 10%; }
    #next-btn { right: 10%; }
}
    </style>
</head>
<body>

<div id="book-wrapper">
    <button id="prev-btn" class="nav-btn">&#10094;</button>
    <div id="book"></div>
    <button id="next-btn" class="nav-btn">&#10095;</button>
</div>

<script>
const isMobile = window.innerWidth <= 768;

// Forçamos o cálculo baseado na tela real do usuário
const screenW = window.innerWidth;
const screenH = window.innerHeight;

const pageFlip = new St.PageFlip(document.getElementById("book"), {
    // No mobile, usamos a largura total do dispositivo
    width: isMobile ? screenW : 1280,
    height: isMobile ? (screenW * (16/9)) : 720, 

    size: "stretch", 
    mode: "portrait",
    usePortrait: true,
    showCover: false,
    mobileScrollSupport: true,
    
    // Trava para não deixar o catálogo encolher demais
    minWidth: isMobile ? screenW : 320,
    minHeight: isMobile ? 450 : 180,
    maxWidth: 2000,
    maxHeight: 2500
});

const totalPages = 6;
const folder = isMobile ? 'pages/mobile/' : 'pages/';
let images = [];

for (let i = 1; i <= totalPages; i++) {
    images.push(`${folder}page_${i}.jpg`);
}

pageFlip.loadFromImages(images);

// Botões
document.getElementById('prev-btn').onclick = () => pageFlip.flipPrev();
document.getElementById('next-btn').onclick = () => pageFlip.flipNext();

window.addEventListener('resize', () => {
    if ((window.innerWidth <= 768) !== isMobile) {
        location.reload();
    }
});    
</script>
</body>
</html>
