<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Catálogo Profissional - Estofados</title>
    
    <script src="https://unpkg.com/page-flip/dist/js/page-flip.browser.js"></script>

    <style>
        body {
            margin: 0; padding: 0; background: #121212;
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; min-height: 100vh; overflow: hidden;
            font-family: sans-serif;
        }

        #book-container {
            position: relative;
            width: 100vw;
            height: 85vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Estilo das páginas */
        .page {
            background-color: #121212;
            width: 100%;
            height: 100%;
        }

        .page img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            pointer-events: none; /* Permite que o arrasto passe pela imagem para o livro */
        }

        /* Contador no Rodapé */
        #controls {
            margin-top: 10px;
            color: white;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Botões laterais invisíveis para toque facilitado */
        .nav-area {
            position: absolute; top: 0; height: 100%; width: 15%; z-index: 10; cursor: pointer;
        }
        .left-area { left: 0; }
        .right-area { right: 0; }

        @media (max-width: 768px) {
            #book-container { height: 80vh; }
        }
    </style>
</head>
<body>

<div id="book-container">
    <div class="nav-area left-area" onclick="book.flipPrev()"></div>
    
    <div id="book">
        </div>

    <div class="nav-area right-area" onclick="book.flipNext()"></div>
</div>

<div id="controls">
    Página: <span id="current-page">1</span> / 6
</div>

<script>
    let book;
    const isMobile = window.innerWidth <= 768;
    const totalPages = 6;
    const folder = isMobile ? 'pages/mobile/' : 'pages/';

    // 1. Criar as páginas no HTML
    const bookElement = document.getElementById('book');
    for (let i = 1; i <= totalPages; i++) {
        const pageDiv = document.createElement('div');
        pageDiv.className = 'page';
        pageDiv.innerHTML = `<img src="${folder}page_${i}.jpg" alt="Página ${i}">`;
        bookElement.appendChild(pageDiv);
    }

    // 2. Configurar o PageFlip
    window.onload = () => {
        // Dimensões baseadas no dispositivo
        const w = isMobile ? window.innerWidth : 600;
        const h = isMobile ? window.innerHeight * 0.75 : 800;

        book = new St.PageFlip(bookElement, {
            width: w,
            height: h,
            size: "stretch",
            minWidth: 315,
            maxWidth: 1000,
            minHeight: 420,
            maxHeight: 1350,
            
            drawShadow: true,
            showCover: false,
            usePortrait: true, // EXIBE APENAS UMA PÁGINA
            startPage: 0,
            autoSize: true,
            mobileScrollSupport: true, // Habilita o arrasto no toque
            clickEventForward: false,
            useMouseEvents: true // Habilita o arrasto no rato
        });

        book.loadFromHTML(document.querySelectorAll(".page"));

        // Atualizar contador
        book.on('flip', (e) => {
            document.getElementById('current-page').innerText = e.data + 1;
        });
    };

    // Suporte a Zoom Nativo: 
    // Como você gerou imagens em alta resolução, o utilizador pode fazer o gesto de "pinça" 
    // no telemóvel para ler os textos de 190cm do Sofá Croácia.
</script>

</body>
</html>
